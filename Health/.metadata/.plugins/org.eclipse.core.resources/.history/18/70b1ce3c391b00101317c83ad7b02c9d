<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<style>
.add-doctor-panel {
    position: fixed;
    top: 0;
    right: -400px;
    width: 400px;
    height: 100vh;
    background: white;
    box-shadow: -2px 0 10px rgba(0,0,0,0.1);
    padding: 20px;
    z-index: 1000;
    transition: right 0.3s ease;
    overflow-y: auto;
}
.add-doctor-panel.active {
    right: 0;
}
.panel-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 999;
}
</style>

<!-- Toggle Button -->
<button id="openDoctorPanel" class="btn btn-success mb-3">
    <i class="fas fa-user-md"></i> Add New Doctor
</button>

<!-- Overlay -->
<div id="panelOverlay" class="panel-overlay"></div>

<!-- Side Panel -->
<div id="addDoctorPanel" class="add-doctor-panel">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4>New Doctor Registration</h4>
        <button id="closeDoctorPanel" class="btn btn-sm btn-outline-secondary">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <form action="${pageContext.request.contextPath}/AddDoctorServlet" method="post">
        <div class="form-group">
            <label>Full Name</label>
            <input type="text" name="name" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label>Specialization</label>
            <input type="text" name="specialization" class="form-control" required
                   placeholder="e.g., Cardiology, Neurology">
        </div>
        
        <div class="form-group">
            <label>Email (Username)</label>
            <input type="email" name="email" class="form-control" required
                   placeholder="Will be used for login">
        </div>
        
        <div class="form-group">
            <label>Password</label>
            <input type="password" name="password" class="form-control" required
                   pattern=".{8,}" title="8 characters minimum">
        </div>
        
        <div class="form-group">
            <label>Confirm Password</label>
            <input type="password" class="form-control" required
                   oninput="checkPasswordMatch(this)">
        </div>
        
        <div class="form-group">
            <label>License Number</label>
            <input type="text" name="license" class="form-control" required>
        </div>
        
        <button type="submit" class="btn btn-primary btn-block mt-4">
            <i class="fas fa-save"></i> Save Doctor
        </button>
    </form>
</div>

<script>
// Panel toggle functionality
document.getElementById('openDoctorPanel').addEventListener('click', function() {
    document.getElementById('addDoctorPanel').classList.add('active');
    document.getElementById('panelOverlay').style.display = 'block';
});

document.getElementById('closeDoctorPanel').addEventListener('click', function() {
    document.getElementById('addDoctorPanel').classList.remove('active');
    document.getElementById('panelOverlay').style.display = 'none';
});

document.getElementById('panelOverlay').addEventListener('click', function() {
    document.getElementById('addDoctorPanel').classList.remove('active');
    this.style.display = 'none';
});

// Password match validation
function checkPasswordMatch(confirmPassword) {
    const password = document.querySelector('input[name="password"]');
    if (confirmPassword.value !== password.value) {
        confirmPassword.setCustomValidity("Passwords don't match");
    } else {
        confirmPassword.setCustomValidity('');
    }
}
</script>